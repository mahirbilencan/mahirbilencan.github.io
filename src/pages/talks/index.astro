---
import SiteLayout from "../../layouts/SiteLayout.astro";
import { getCollection } from "astro:content";

let entries = [];
try {
	entries = await getCollection("talks");
} catch {
	entries = [];
}
entries = entries.filter((e) => !e.data.draft);
entries.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<SiteLayout title="Talks">
	<section class="mt-2">
		<h1>Talks</h1>
		<p class="mt-4 max-w-prose text-zinc-800">
			Talks, posters, and seminar presentations. For publications and teaching, see <a href="/work/">Work</a>.
		</p>
		<div class="mt-6 max-w-2xl rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm">
			<div class="prose max-w-none">
				{entries.length === 0 ? (
					<p class="rounded-xl border border-zinc-200 bg-zinc-50 p-4">
						No entries yet. Add Markdown files under <code>astro/src/content/talks/</code>.
					</p>
				) : (
					<ul>
						{entries.map((e) => (
							<li>
								<strong>{e.data.title}</strong>
								<div class="text-zinc-600">
									{e.data.event ? `${e.data.event} • ` : ""}
									{e.data.location ? `${e.data.location} • ` : ""}
									{e.data.date.toLocaleDateString(undefined, { year: "numeric", month: "short" })}
								</div>
							</li>
						))}
					</ul>
				)}
			</div>
		</div>
	</section>
</SiteLayout>
