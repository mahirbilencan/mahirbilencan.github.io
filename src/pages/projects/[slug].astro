---
import SiteLayout from "../../layouts/SiteLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
	let entries = [];
	try {
		entries = await getCollection("projects");
	} catch {
		entries = [];
	}
	entries = entries.filter((e) => !e.data.draft);
	return entries.map((e) => ({ params: { slug: e.slug }, props: { entry: e } }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<SiteLayout title={entry.data.title} description={entry.data.summary ?? undefined}>
	<section class="mt-2">
		<div class="max-w-prose">
			<p class="text-sm text-zinc-600">
				<a class="no-underline hover:underline" href="/projects/">Projects</a>
				<span class="mx-2 text-zinc-300">/</span>
				<span>{entry.data.title}</span>
			</p>
			<h1 class="mt-2">{entry.data.title}</h1>
			{entry.data.summary ? <p class="mt-3 text-zinc-800">{entry.data.summary}</p> : null}
		</div>

		<article class="prose mt-8 max-w-prose">
			<Content />
		</article>
	</section>
</SiteLayout>
