---
import SiteLayout from "../../layouts/SiteLayout.astro";
import { getCollection } from "astro:content";

let entries = [];
try {
	entries = await getCollection("teaching");
} catch {
	entries = [];
}
entries = entries.filter((e) => !e.data.draft);
entries.sort((a, b) => {
	const inst = (a.data.institution ?? "").localeCompare(b.data.institution ?? "");
	if (inst !== 0) return inst;
	return a.data.course.localeCompare(b.data.course);
});
---

<SiteLayout title="Teaching">
	<section class="mt-2">
		<h1>Teaching</h1>
		<p class="mt-4 max-w-prose text-zinc-800">
			Recent courses and instructional work. Materials for current students are shared through Canvas. For research outputs, see
			<a href="/CV.pdf">CV</a>.
		</p>
		<div class="mt-6 max-w-2xl rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm">
			<div class="prose max-w-none">
				{entries.length === 0 ? (
					<p class="rounded-xl border border-zinc-200 bg-zinc-50 p-4">No entries yet.</p>
				) : (
					<ul>
						{entries.map((e) => (
							<li>
								<strong>{e.data.course}</strong>
								{e.data.institution ? ` (${e.data.institution})` : ""}
							</li>
						))}
					</ul>
				)}
			</div>
		</div>
	</section>
</SiteLayout>
